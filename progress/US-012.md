## 2026-01-11 21:13 - US-012

### Implemented
- Updated log format to `YYYY-MM-DD HH:MM:SS - LEVEL - message` (without milliseconds)
  - Added `date_format` parameter to `logging.Formatter` calls
- Added `get_default_log_dir()` helper function returning `~/.logs/activity-beacon/`
- Added test `TestGetDefaultLogDir::test_returns_correct_path` to verify default directory
- Fixed logger cache clearing in conftest.py to prevent test interference
  - Properly close file handlers before removing them
  - Clear both COMPONENT_LOGGERS dict and Python's logging module loggers

### Files Changed
- `src/activity_beacon/logging.py` - Updated log format, added get_default_log_dir()
- `tests/test_logging.py` - Updated test to match new format, added default directory test
- `tests/conftest.py` - Added clear_logger_cache fixture to properly clean up handlers
- `prd.json` - Marked US-012 as passing

### Test Results
- All 22 logging tests passing
- All 163 total tests passing
- Typecheck passes (ruff and basedpyright)

### Learnings for future iterations

**Logging Format:**
- Use `datefmt` parameter in `logging.Formatter` to control timestamp format
- Format `YYYY-MM-DD HH:MM:SS` requires `datefmt="%Y-%m-%d %H:%M:%S"`
- Without `datefmt`, Python adds milliseconds by default

**Test Isolation:**
- Logger caching can cause test interference when tests run in different orders
- Must properly close file handlers before clearing: `handler.close()` then `logger.removeHandler(handler)`
- Use `autouse=True` fixture in conftest.py to ensure cleanup runs for all tests
- Copy handler list `logger.handlers[:]` before iterating to avoid modification during iteration

**Daily Rotating Logs:**
- Current implementation creates date-based filenames (YYYY-MM-DD)
- All loggers writing to same file on same date is intentional behavior
- File handlers are created once per logger and reused (via COMPONENT_LOGGERS cache)
