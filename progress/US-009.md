## 2026-01-11 19:44 - US-009

- What was implemented
  - Added SystemStateMonitor to detect screen lock state using Quartz.CGSessionCopyCurrentDictionary
  - Implemented is_screen_locked(), add/remove listener API, and check_and_notify() to call registered callbacks on state change
  - Added comprehensive unit tests covering locked/unlocked cases, exception handling, and callback behavior
- Files changed
  - `src/activity_beacon/system/state_monitor.py` (new)
  - `src/activity_beacon/system/__init__.py` (new)
  - `src/activity_beacon/system_state/system_state_monitor.py` (new)
  - `tests/test_system_state_monitor.py` (new)

- **Learnings for future iterations:**
  - Use `Quartz.CGSessionCopyCurrentDictionary()` and check `CGSSessionScreenIsLocked` key for screen lock detection
  - Tests mock Quartz calls via patching the module inside `activity_beacon.system_state.system_state_monitor`
  - RUFF is strict: avoid bare `except Exception` where possible; use specific exceptions or add `# noqa: BLE001` when necessary
---
